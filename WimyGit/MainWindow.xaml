<Window x:Class="WimyGit.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Icon="Icon.ico"
        Title="WimyGit" Height="800" Width="1024" Loaded="Window_Loaded" Activated="Window_Activated" MinWidth="500" MinHeight="400">
    <Window.InputBindings>
        <KeyBinding Modifiers="Ctrl" Key="Return" Command="{Binding CommitCommand}" />
        <KeyBinding Key="F5" Command="{Binding ChangeDirectory}" />
    </Window.InputBindings>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="65" />
            <RowDefinition Height="*" />
            <RowDefinition Height="100" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <ComboBox x:Name="comboBox" Margin="10,10,325,0" VerticalAlignment="Top" IsEditable="True" Text="{Binding Path=Directory}" ItemsSource="{Binding Path=RepositoryList}" />
            <Button Content="Change Directory" HorizontalAlignment="Right" Margin="0,10,220,0" VerticalAlignment="Top" Width="100" Command="{Binding Path=ChangeDirectory}" Height="22" />
            <Button Command="{Binding Path=OpenExplorer}" x:Name="button2" Content="Open Explorer" HorizontalAlignment="Right" Margin="0,10,115,0" VerticalAlignment="Top" Width="100" Height="22"/>
            <Button Command="{Binding Path=OpenGitBash}" x:Name="button3" Content="Open Git Bash" HorizontalAlignment="Right" Margin="0,10,10,0" VerticalAlignment="Top" Width="100" Height="22"/>
            <Label x:Name="label" Content="Current Branch:" HorizontalAlignment="Left" Margin="10,37,0,0" VerticalAlignment="Top"/>
            <Label x:Name="label1" Content="{Binding Path=Branch}" HorizontalAlignment="Left" Margin="109,37,0,0" VerticalAlignment="Top" Width="121"/>
        </Grid>
        <Grid Margin="0,65,0,102" Grid.RowSpan="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="20*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="80*" />
            </Grid.ColumnDefinitions>
            <Grid>
            </Grid>
            <GridSplitter Grid.Column="1" Width="15" HorizontalAlignment="Stretch"/>
            <Grid Grid.Column="2">
                <TabControl x:Name="tabControl" HorizontalContentAlignment="Left" VerticalContentAlignment="Stretch">
                    <TabItem Header="Pending">
                        <Grid Background="#FFF9F9F9">
                            <TextBox x:Name="textBox" Text="{Binding CommitMessage}" Height="77" Margin="10,10,102,0" TextWrapping="Wrap" VerticalAlignment="Top"/>
                            <Button x:Name="button1" Content="Commit" Command="{Binding Path=CommitCommand}" HorizontalAlignment="Right" Margin="0,10,10,0" VerticalAlignment="Top" Width="87" Height="77"/>
                            <ListBox Height="102" Margin="10,118,10,0" VerticalAlignment="Top" ItemsSource="{Binding Path=StagedList}" >
                                <ListBox.InputBindings>
                                    <KeyBinding Modifiers="Ctrl" Key="D" Command="{Binding StagedDiffCommand}" />
                                </ListBox.InputBindings>
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="{x:Type ListBoxItem}">
                                        <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}" />
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="100" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Text="{Binding Status}" />
                                            <TextBlock Grid.Column="1" Text="{Binding FilePath}" Width="auto" />
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            <Label Content="Staged" HorizontalAlignment="Left" Margin="10,92,0,0" VerticalAlignment="Top"/>
                            <Label Content="Modified" HorizontalAlignment="Left" Margin="10,243,0,0" VerticalAlignment="Top"/>
                            <ListBox Margin="10,274,10,10" ItemsSource="{Binding Path=ModifiedList}" SelectionMode="Extended">
                                <ListBox.InputBindings>
                                    <KeyBinding Modifiers="Ctrl" Key="D" Command="{Binding ModifiedDiffCommand}" />
                                    <KeyBinding Modifiers="Ctrl" Key="R" Command="{Binding RevertCommand}" />
                                </ListBox.InputBindings>
                                <ListBox.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Diff" InputGestureText="Ctrl+D" Command="{Binding Path=ModifiedDiffCommand}" />
                                        <MenuItem Header="Revert" InputGestureText="Ctrl+R" Command="{Binding Path=RevertCommand}" />
                                        <MenuItem Header="Refresh" InputGestureText="F5" Command="{Binding Path=ChangeDirectory}" />
                                    </ContextMenu>
                                </ListBox.ContextMenu>
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="{x:Type ListBoxItem}">
                                        <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}" />
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="100" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Text="{Binding Status}" />
                                            <TextBlock Grid.Column="1" Text="{Binding FilePath}" Width="auto" />
                                        </Grid>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                            <Button x:Name="button" Content="Stage" Command="{Binding Path=StageSelected}" HorizontalAlignment="Left" Margin="270,225,0,0" VerticalAlignment="Top" Width="96" Height="44"/>
                        </Grid>
                    </TabItem>
                    <TabItem Header="History">
                        <Grid Background="#FFF9F9F9"/>
                    </TabItem>
                </TabControl>
            </Grid>
        </Grid>
        <Grid Grid.Row="2" Margin="0,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TextBox Height="82" TextWrapping="Wrap" Text="{Binding Path=Log}" VerticalAlignment="Top" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="1" VerticalScrollBarVisibility="Auto" IsReadOnlyCaretVisible="True" AllowDrop="False" TextChanged="TextBox_TextChanged" Margin="10,10,10,0"/>
        </Grid>
    </Grid>
</Window>
